export const DEFAULT_CSA_TEMPLATE = `
# CLIENT SERVICE AGREEMENT (CSA)

**ORBIT Staffing OS - Temporary Staffing Services**

**Effective Date:** {{effectiveDate}}  
**Agreement Version:** {{version}}  
**Client Name:** {{clientName}}  
**State:** {{state}}

---

## 1. WORKER CONVERSION & ANTI-POACHING PROTECTION

### 1.1 Temporary Employment Period
All workers provided by ORBIT Staffing OS ("ORBIT") are considered **temporary employees** of ORBIT for a minimum period of:
- **Six (6) months** from the worker's first day of assignment, OR
- **480 hours** of cumulative work time, **whichever comes first**

### 1.2 Conversion Fee
If Client hires, engages, or solicits any ORBIT worker (directly or indirectly) before the completion of the minimum temporary period defined in Section 1.1, Client agrees to pay ORBIT a conversion fee of **$5,000 per worker**.

### 1.3 Definition of "Conversion"
"Conversion" includes but is not limited to:
- Direct hire as employee (W-2 or 1099)
- Independent contractor engagement
- Third-party referral or placement
- Engagement through another staffing agency
- Any employment relationship that bypasses ORBIT

### 1.4 Fee Adjustment Rights
ORBIT reserves the right to increase or decrease the conversion fee at the sole discretion of management (Jason/Sidonie). Client will be notified in writing of any fee adjustments with 30 days' notice.

### 1.5 Duration Tracking
The temporary period is calculated from the worker's **first clock-in** on Client's job site. ORBIT will track hours worked and notify Client when workers approach the end of their temporary period.

---

## 2. PAYMENT TERMS & LATE FEES

### 2.1 Payment Terms
Client agrees to the following payment terms: **{{paymentTerms}}** (Net 7, Net 15, or Net 30 days from invoice date).

### 2.2 Invoicing Frequency
ORBIT will invoice Client on a {{invoicingFrequency}} basis (weekly or bi-weekly) for all hours worked by temporary workers.

### 2.3 Late Payment Penalties
Any invoice not paid within the agreed payment terms will accrue interest at a rate of **1.5% per month** (18% APR) on the overdue balance until paid in full.

### 2.4 Service Suspension
ORBIT reserves the right to **suspend staffing services** if Client's account becomes 15 days past due. Services will resume upon payment of all outstanding balances plus accrued late fees.

### 2.5 Collections & Legal Recourse
If Client's account is referred to collections or legal action:
- Client is responsible for all collection costs, attorney fees, and court costs
- ORBIT may report delinquent accounts to credit bureaus
- ORBIT may file liens on Client's property where permitted by state law

### 2.6 Lien Rights
In states where permitted by law (including {{state}}), ORBIT reserves the right to file mechanic's liens or labor liens against Client's property for unpaid invoices related to labor provided.

---

## 3. LIABILITY, INSURANCE & RISK ALLOCATION

### 3.1 Control, Care, and Custody
**Client has exclusive "control, care, and custody"** of all ORBIT workers while they are on Client's job site. This includes:
- Supervision of work activities
- Safety oversight and training
- Provision of safe working conditions
- Compliance with OSHA and state safety regulations

### 3.2 Client Liability
Client is **solely liable** for:
- Workplace injuries occurring on Client's job site
- Safety violations and OSHA citations
- Damage to Client's equipment, property, or third-party property
- Workers' compensation claims arising from Client's negligence
- Any claims resulting from unsafe conditions created by Client

### 3.3 ORBIT Insurance Coverage
ORBIT maintains the following insurance coverage:
- General Liability Insurance: $1,000,000 per occurrence
- Workers' Compensation Insurance: As required by state law
- Employer's Liability Insurance: $1,000,000 per occurrence

### 3.4 Client Insurance Requirements
Client agrees to maintain:
- General Liability Insurance with minimum limits of $1,000,000
- Workers' Compensation Insurance (if applicable)
- Any additional insurance required by Client's industry or state law

### 3.5 Indemnification
Client agrees to **indemnify and hold harmless** ORBIT from any claims, damages, or losses arising from:
- Client's negligence or unsafe working conditions
- Client's failure to supervise workers properly
- Equipment failures caused by Client's lack of maintenance
- Violations of safety regulations by Client

### 3.6 Limitation of ORBIT Liability
ORBIT is **not responsible** for:
- Injuries caused by Client's negligence or unsafe conditions
- Property damage caused by Client's faulty equipment
- Third-party claims arising from Client's operations
- Any consequential, incidental, or punitive damages

---

## 4. SERVICE TERMS & PRICING

### 4.1 Labor Markup
ORBIT charges a **1.45x markup** on all labor costs. This transparent pricing model includes:
- Worker wages and payroll taxes
- Workers' compensation insurance premiums
- Administrative costs and overhead
- ORBIT's service fee

**Example:** If a worker earns $20/hour, Client pays $29/hour (20 × 1.45 = 29).

### 4.2 Worker Replacement Guarantee
If an ORBIT worker:
- Fails to show up for a scheduled shift (no-call/no-show)
- Demonstrates poor performance or attitude
- Violates Client's policies

ORBIT will provide a **replacement worker** at no additional charge, subject to availability.

### 4.3 Cancellation Policy
Client must provide **24-hour advance notice** to cancel scheduled shifts. Cancellations with less than 24 hours' notice may result in:
- Minimum 4-hour billing for the cancelled shift
- Loss of priority scheduling for future staffing requests

### 4.4 Force Majeure
Neither party is liable for delays or failures due to events beyond their reasonable control, including:
- Natural disasters (hurricanes, floods, earthquakes)
- Pandemics or public health emergencies
- Government actions or regulations
- Acts of terrorism or war
- Labor strikes or shortages

### 4.5 Worker Quality Assurance
ORBIT ensures all workers:
- Pass background checks (where applicable)
- Complete I-9 verification
- Receive safety orientation training
- Are properly classified (W-2 employees of ORBIT)

---

## 5. TERMINATION & POST-TERMINATION OBLIGATIONS

### 5.1 Termination by Either Party
Either party may terminate this Agreement with **30 days' written notice** to the other party. Notice must be sent via:
- Certified mail, OR
- Email to the designated contact with read receipt confirmation

### 5.2 Immediate Termination for Cause
ORBIT may terminate this Agreement **immediately** if Client:
- Fails to pay invoices (15+ days past due)
- Commits material breach of this Agreement
- Creates unsafe working conditions for ORBIT workers
- Violates state or federal employment laws
- Engages in fraudulent or illegal activity

### 5.3 Client Termination for Cause
Client may terminate this Agreement immediately if ORBIT:
- Fails to provide workers as agreed
- Commits material breach of this Agreement
- Provides workers who are not properly authorized to work

### 5.4 Outstanding Balances Due Immediately
Upon termination (for any reason), **all outstanding balances become due immediately**. This includes:
- Unpaid invoices
- Accrued late fees and interest
- Any conversion fees owed under Section 1

### 5.5 Post-Termination Worker Conversion
The worker conversion provisions in **Section 1** remain in effect for **90 days after termination** of this Agreement. If Client hires any ORBIT worker within 90 days of termination, the $5,000 conversion fee applies.

### 5.6 Return of Property
Upon termination, Client must immediately return any ORBIT property, including:
- Equipment or tools loaned to workers
- ORBIT-issued identification badges or uniforms
- Any confidential or proprietary information

---

## 6. MISCELLANEOUS PROVISIONS

### 6.1 Governing Law
This Agreement is governed by the laws of the State of **{{state}}**, without regard to conflict of law principles.

### 6.2 Dispute Resolution
Any disputes arising from this Agreement will be resolved through:
1. Good faith negotiation between the parties
2. Mediation (if negotiation fails)
3. Binding arbitration or litigation in {{state}} courts

### 6.3 Entire Agreement
This Agreement constitutes the entire agreement between the parties and supersedes all prior agreements, whether written or oral.

### 6.4 Amendments
This Agreement may only be amended in writing, signed by authorized representatives of both parties. ORBIT may update the standard CSA template; Client will be notified 30 days before any changes take effect.

### 6.5 Severability
If any provision of this Agreement is found to be invalid or unenforceable, the remaining provisions remain in full force and effect.

### 6.6 Waiver
Failure by either party to enforce any provision does not constitute a waiver of that provision or any other provision.

### 6.7 Independent Contractor Relationship
ORBIT is an independent contractor. Nothing in this Agreement creates a partnership, joint venture, or employment relationship between ORBIT and Client.

### 6.8 Assignment
Client may not assign this Agreement without ORBIT's prior written consent. ORBIT may assign this Agreement to any affiliate or successor entity.

---

## 7. CLIENT ACKNOWLEDGMENTS & SIGNATURE

By signing below, Client acknowledges and agrees to:

☐ **Worker Conversion Fee:** I understand the $5,000 per worker conversion fee and the 6-month/480-hour temporary period.

☐ **Payment Terms:** I agree to {{paymentTerms}} payment terms and 1.5% monthly late fees on overdue balances.

☐ **Liability for Job Site:** I acknowledge that my company has control, care, and custody of workers on our job site and is liable for workplace injuries and safety violations.

☐ **Pricing Model:** I agree to the 1.45x markup on all labor costs.

---

## LEGAL DISCLAIMER

**This Client Service Agreement is a preliminary agreement intended for temporary staffing services. ORBIT Staffing OS strongly recommends that Client have this Agreement reviewed by legal counsel before signing. This template is not a substitute for professional legal advice tailored to Client's specific business needs and applicable state laws.**

**ORBIT Staffing OS makes no warranties regarding the legal sufficiency of this Agreement and disclaims all liability for any legal disputes arising from its use.**

---

## SIGNATURE

**Client Signature:**  
Name: {{signerName}}  
Title: {{signerTitle}}  
Date: {{signedDate}}  
IP Address: {{ipAddress}}  
Device: {{device}}

**Digital Signature:** {{digitalSignature}}

**ORBIT Staffing OS Representative:**  
Name: Jason Moore / Sidonie Moore  
Title: Co-Founder / Operations Director  
Date: {{effectiveDate}}

---

**Agreement ID:** {{agreementId}}  
**Template Version:** {{version}}  
**Generated:** {{generatedTimestamp}}
`;

export function renderCSATemplate(data: {
  version: string;
  effectiveDate: string;
  clientName: string;
  state: string;
  paymentTerms: string;
  invoicingFrequency: string;
  signerName?: string;
  signerTitle?: string;
  signedDate?: string;
  ipAddress?: string;
  device?: string;
  digitalSignature?: string;
  agreementId?: string;
  generatedTimestamp?: string;
}): string {
  let rendered = DEFAULT_CSA_TEMPLATE;
  
  Object.entries(data).forEach(([key, value]) => {
    const placeholder = new RegExp(`{{${key}}}`, 'g');
    rendered = rendered.replace(placeholder, value || '');
  });
  
  return rendered;
}
